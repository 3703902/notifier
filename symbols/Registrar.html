
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		<title>Registrar | JsDoc Reference</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<meta name="mobileoptimized" content="0" />
	
		<link rel="stylesheet" href="../css/all.css" media="all" />
		<link rel="stylesheet" href="../css/handheld.css" media="only screen and (max-width: 660px)" />
		<link rel="stylesheet" href="../css/handheld.css" media="handheld" />
		<link rel="stylesheet" href="../css/screen.css" media="screen and (min-width: 661px)" />

		<script src="../javascript/all.js"></script>
		<!--[if lt IE 9]>
			<script src="../javascript/html5.js"></script>
		<![endif]-->
	</head>

	<body>

<div class="index">
	<div class="menu">
		<div class="indexLinks">
			<a href="../index.html">Classes</a>
			<a href="../files.html">Files</a>
		</div>
	
		<h2 class="heading1">Classes</h2>
		
		<input type="text" name="classFilter" class="classFilter" id="ClassFilter" placeholder="Filter"></input>
		
		<nav>
			<ul class="classList" id="ClassList">
				
					<li><a href="../symbols/_global_.html">_global_</a></li>
				
					<li><a href="../symbols/APNs.html">APNs</a></li>
				
					<li><a href="../symbols/App.html">App</a></li>
				
					<li><a href="../symbols/Config.html">Config</a></li>
				
					<li><a href="../symbols/Deque.html">Deque</a></li>
				
					<li><a href="../symbols/Deque.Node.html">Deque<span class='break'> </span>.<span class='break'> </span>Node</a></li>
				
					<li><a href="../symbols/Filters.html">Filters</a></li>
				
					<li><a href="../symbols/GCM.html">GCM</a></li>
				
					<li><a href="../symbols/LoggerUtils.html">LoggerUtils</a></li>
				
					<li><a href="../symbols/NotificationRequest.html">NotificationRequest</a></li>
				
					<li><a href="../symbols/NotificationRequestTracker.html">NotificationRequestTracker</a></li>
				
					<li><a href="../symbols/Notifier.html">Notifier</a></li>
				
					<li><a href="../symbols/PostTracker.html">PostTracker</a></li>
				
					<li><a href="../symbols/Registrar.html">Registrar</a></li>
				
					<li><a href="../symbols/RegistrationFilter.html">RegistrationFilter</a></li>
				
					<li><a href="../symbols/RegistrationStore.html">RegistrationStore</a></li>
				
					<li><a href="../symbols/TemplateCache.html">TemplateCache</a></li>
				
					<li><a href="../symbols/TemplateCache.Entry.html">TemplateCache<span class='break'> </span>.<span class='break'> </span>Entry</a></li>
				
					<li><a href="../symbols/TemplateManager.html">TemplateManager</a></li>
				
					<li><a href="../symbols/TemplateStore.html">TemplateStore</a></li>
				
					<li><a href="../symbols/WNS.html">WNS</a></li>
				
			</ul>
		</nav>
	</div>
	<div class="fineprint" style="clear:both">
		<footer>
			
			Documentation generator: <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.4.0<br />
			Template: <a href="http://www.thebrightlines.com/2010/05/06/new-template-for-jsdoctoolkit-codeview/" target="_blank">Codeview</a> 1.2<br />
			Generated on:
			<time datetime='2012-7-15' pubdate>2012-7-15 17:20</time>
		</footer>
	</div>
</div>

<div class="index indexStatic"></div>

<div class="content">
	<div class="innerContent">
		<article>
			<header>
				<h1 class="classTitle">
					
					Class <span>Registrar</span>
				</h1>
				
				<div class="intro">
					<p class="description summary">
						A registrar allows for querying, updating, and deleting of registrations for a given user ID. A registration defines
how to reach a user's device via notifications and in what form the notification payloads should be in (language,
version, etc). A registration also contains one or more routes, which are named pathways for notification delivery.
If a notification is to be sent to devices along a certain route, only registrations containing a route with the
matching name will be notified.
					</p>
						
					
						<ul class="summary">
							
							
							
								<li>Defined in: <a href="../symbols/src/registrar.js.html">registrar.js</a></li>
							
							
						</ul>
					
				</div>
			</header>
			
			
				<section>
					<div class="props">
						<table class="summaryTable" cellspacing="0" summary="A summary of the constructor documented in the class Registrar.">
							<caption class="sectionTitle">Class Summary</caption>
							<thead>
								<tr>
									<th scope="col">Constructor Attributes</th>
									<th scope="col">Constructor Name and Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td class="attributes">&nbsp;</td>
									<td class="nameDescription" >
										<div class="fixedFont">
											<b><a href="../symbols/Registrar.html#constructor">Registrar</a></b>(registrationStore)
										</div>
										<div class="description"><p>Registrar constructor.</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</section>
			
			
			
				
				<section>
					
						<nav>
							<div class="props">
								<table class="summaryTable" cellspacing="0" summary="A summary of the fields documented in the class Registrar.">
									<caption class="sectionTitle">Field Summary</caption>
									
									<thead>
										<tr>
											<th scope="col">Field Attributes</th>
											<th scope="col">Field Name and Description</th>
										</tr>
									</thead>
									
									<tbody>
										
											<tr>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont">
													<b><a href="../symbols/Registrar.html#DeleteKeyModel">DeleteKeyModel</a></b>
													</div>
													<div class="description"><p>JSON schema for delete parameter definitions.</div>
												</td>
											</tr>
										
											<tr>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont">
													<b><a href="../symbols/Registrar.html#RegistrationModel">RegistrationModel</a></b>
													</div>
													<div class="description"><p>JSON schema for registration definitions.</div>
												</td>
											</tr>
										
											<tr>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont">
													<b><a href="../symbols/Registrar.html#RouteModel">RouteModel</a></b>
													</div>
													<div class="description"><p>JSON schema for route definitions.</div>
												</td>
											</tr>
										
											<tr>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont">
													<b><a href="../symbols/Registrar.html#UserIdModel">UserIdModel</a></b>
													</div>
													<div class="description"><p>JSON schema for userId values.</div>
												</td>
											</tr>
										
									</tbody>
								</table>
							</div>
						</nav>
					
					
					
				</section>
			
	<!--
	#### METHODS SUMMARY
	-->
			
				<section>
					
					
					<div class="props">
						<h2 class="sectionTitle">Method Summary</h2>
						
						
							<nav>
								<table class="summaryTable" id="MethodsList" cellspacing="0" summary="A summary of the methods documented in the class Registrar.">
									<thead>
										<tr>
											<th scope="col">Method Attributes</th>
											<th scope="col">Method Name and Description</th>
										</tr>
									</thead>
									
									<tbody>
										
										
											<tr
												 class='item0'
											>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont"><b><a href="../symbols/Registrar.html#del">del</a></b>(req, res)
													</div>
													<div class="description"><p>Delete a registration or all registrations for a given user.</div>
												</td>
											</tr>
										
											<tr
												 class='item1'
											>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont"><b><a href="../symbols/Registrar.html#get">get</a></b>(req, res)
													</div>
													<div class="description"><p>Obtain the current registrations for a given user.</div>
												</td>
											</tr>
										
											<tr
												 class='item2'
											>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont"><b><a href="../symbols/Registrar.html#route">route</a></b>(app)
													</div>
													<div class="description"><p>Add Express routes for the Registrar API.</div>
												</td>
											</tr>
										
											<tr
												 class='item3'
											>
												<td class="attributes">&nbsp;</td>
												<td class="nameDescription">
													<div class="fixedFont"><b><a href="../symbols/Registrar.html#set">set</a></b>(req, res)
													</div>
													<div class="description"><p>Add or update a registration for a given user.</div>
												</td>
											</tr>
										
									</tbody>
								</table>
							</nav>
						
					
						
					</div>
				</section>
			
			
	<!--
	#### EVENTS SUMMARY
	-->
			
	<!--
	#### CONSTRUCTOR DETAILS
	-->
			
				<section>
					<div class="details props">
						<div class="innerProps">
							<h2 class="sectionTitle" id="constructor">
								Class Detail
							</h2>
							
							<div class="fixedFont">
								<b>Registrar</b>(registrationStore)
							</div>
							
							<div class="description">
								<p>Registrar constructor.</p>
								
							</div>
							
							
						
							
								<dl class="detailList params">
									<dt class="heading">Parameters:</dt>
									
										<dt>
											<span class="light fixedFont">{<a href="../symbols/RegistrationStore.html">RegistrationStore</a>}</span>  <b>registrationStore</b>
											
										</dt>
										<dd><p>the <a href="../symbols/RegistrationStore.html">RegistrationStore</a> instance to rely on for persistent data
operations.</p></dd>
									
								</dl>
							
							
							
						</div>
					</div>
				</section>
			
	<!--
	#### FIELD DETAILS
	-->
			
				<section>
					<div class="details props">
						<div class="innerProps">
							<h2 class="sectionTitle">
								Field Detail
							</h2>
							
							
								<div class="fixedFont heading" id="DeleteKeyModel">
									<span class='lighter'>
									
									</span>
									
									<span class="light">{Model}</span>
									
									<b>DeleteKeyModel</b>							
								</div>
								
								<div class="description">
									<p>JSON schema for delete parameter definitions. Attributes:</p>

<ul>
<li>registrationId: the unique identifier associated with the device to be removed. See
<a href="../symbols/Registrar.html#RegistrationModel">Registrar#RegistrationModel</a> for additional information.</li>
</ul>
									
									
									
								</div>
								
								
									
								
								<div class="hr"></div>
							
								<div class="fixedFont heading" id="RegistrationModel">
									<span class='lighter'>
									
									</span>
									
									<span class="light">{Model}</span>
									
									<b>RegistrationModel</b>							
								</div>
								
								<div class="description">
									<p>JSON schema for registration definitions. A registration consists of one or more routes
(see <a href="../symbols/Registrar.html#RouteModel">Registrar#RouteModel</a>) that define the specific ways a device may be reached via notifications.
A registration details the version of the notification templates to be used when generating notification
payloads, the language of the notifications to generate, and the delivery service to use for the notification.</p>

<ul>
<li>registrationId: the unique identifier associated with the device being registered. This must be unique across
all devices, but it should be constant for the same device.</li>
<li>templateVersion: the version to look for when searching for templates to use for this device</li>
<li>templateLanguage: the language to look for when searching for templates to use for this device</li>
<li>service: identifier of the OS-specific service that handles notification delivery ("wns", "apns", "gcm")</li>
<li>routes: an array of one or more <a href="../symbols/Registrar.html#RouteModel">Registrar#RouteModel</a> objects that define the registration delivery
      paths for the device</li>
</ul>
									
									
									
								</div>
								
								
									
								
								<div class="hr"></div>
							
								<div class="fixedFont heading" id="RouteModel">
									<span class='lighter'>
									
									</span>
									
									<span class="light">{Model}</span>
									
									<b>RouteModel</b>							
								</div>
								
								<div class="description">
									<p>JSON schema for route definitions. A route is a means by which one can reach a device via notifications. Each
device has a unique token value that is valid for secondsToLive seconds into the future. Whether or not the
route is used for a notification depends on if the route name associates with a notification template.</p>

<ul>
<li>name: the name of the route. Only receives notifications from templates with a matching name value.</li>
<li>token: the OS-specific value associated with the device to notify</li>
<li>secondsToLive: the number of seconds this registration route will be valid</li>
</ul>
									
									
									
								</div>
								
								
									
								
								<div class="hr"></div>
							
								<div class="fixedFont heading" id="UserIdModel">
									<span class='lighter'>
									
									</span>
									
									<span class="light">{Model}</span>
									
									<b>UserIdModel</b>							
								</div>
								
								<div class="description">
									<p>JSON schema for userId values. Contains just one value:</p>

<ul>
<li>userId: the user to operate on</li>
</ul>
									
									
									
								</div>
								
								
									
								
								
							
						</div>
					</div>
				</section>
			
	<!--
	#### METHOD DETAILS
	-->		
			
				<section>
					<div class="details props">
						<div class="innerProps">
							<h2 class="sectionTitle">
								Method Detail
							</h2>
							
							<ul class="methodDetail" id="MethodDetail">
								
								
									<li 
										 class='item0'
									>
										<div class="fixedFont heading" id="del">
											<span class='lighter'>
											
											</span>
											
											
											
											<b>del</b>(req, res)
										</div>
										
										<div class="description">
											<p>Delete a registration or all registrations for a given user. If a JSON payload exits with a registrationId
attribute, only delete the one entity matching the registrationId value. Otherwise, delete all registrations for
the user.</p>
											
											
											
											
										</div>
										
										
											
												<pre class="code"><code>{}</code></pre>
											
												<pre class="code"><code>{registrationId: "1234-56-7890"}</code></pre>
											
										
										
										
											<dl class="detailList params">
												<dt class="heading">Parameters:</dt>
												
													<dt>
														<span class="light fixedFont">{Express.Request}</span> <b>req</b>
														
													</dt>
													<dd><p>Describes the incoming HTTP request. Message body must be JSON that follows the
<a href="../symbols/Registrar.html#DeleteKeyModel">Registrar#DeleteKeyModel</a> model.</p></dd>
												
													<dt>
														<span class="light fixedFont">{Express.Response}</span> <b>res</b>
														
													</dt>
													<dd><p>HTTP response generator for the request. Outputs JSON if no error.</p>

<ul>
<li>204 NO CONTENT: found and deleted the registration(s)</li>
<li>400 BAD REQUEST: missing or invalid attribute(s)</li>
<li>404 NOT FOUND: unable to locate any registration to delete</li>
</ul></dd>
												
											</dl>
										
										
										
										<div class="hr"></div>
									</li>
								
									<li 
										 class='item1'
									>
										<div class="fixedFont heading" id="get">
											<span class='lighter'>
											
											</span>
											
											
											
											<b>get</b>(req, res)
										</div>
										
										<div class="description">
											<p>Obtain the current registrations for a given user.</p>
											
											
											
											
										</div>
										
										
											
												<pre class="code">HTTP GET /john.doe</pre>
											
												<pre class="code"><code>{registrationId: "1234-56-7890", templateVersion: "3", templateLanguage: "en-US",
 service: "apns",
 routes:[{name: "main", token: "unique main token", expiration: 86400},
         {name: "alt", token: "unique alt token", expiration: 86400}]}
</code></pre>
											
										
										
										
											<dl class="detailList params">
												<dt class="heading">Parameters:</dt>
												
													<dt>
														<span class="light fixedFont">{Express.Request}</span> <b>req</b>
														
													</dt>
													<dd><p>Describes the incoming HTTP request. Message body is ignored; the URL must contain
the user ID to use, and it must adhere to the <a href="../symbols/Registrar.html#UserIdModel">Registrar#UserIdModel</a> model.</p></dd>
												
													<dt>
														<span class="light fixedFont">{Express.Response}</span> <b>res</b>
														
													</dt>
													<dd><p>HTTP response generator for the request. Outputs JSON if no error.</p>

<ul>
<li>200 OK if one or more registrations were found</li>
<li>400 BAD REQUEST if missing or invalid query attribute(s)</li>
<li>404 NOT FOUND if no templates were found for the given key attributes</li>
</ul></dd>
												
											</dl>
										
										
										
										<div class="hr"></div>
									</li>
								
									<li 
										 class='item2'
									>
										<div class="fixedFont heading" id="route">
											<span class='lighter'>
											
											</span>
											
											
											
											<b>route</b>(app)
										</div>
										
										<div class="description">
											<p>Add Express routes for the Registrar API.</p>
											
											
											
											
										</div>
										
										
										
										
											<dl class="detailList params">
												<dt class="heading">Parameters:</dt>
												
													<dt>
														<span class="light fixedFont">{Express.App}</span> <b>app</b>
														
													</dt>
													<dd><p>The application to route HTTP request.</p></dd>
												
											</dl>
										
										
										
										<div class="hr"></div>
									</li>
								
									<li 
										 class='item3'
									>
										<div class="fixedFont heading" id="set">
											<span class='lighter'>
											
											</span>
											
											
											
											<b>set</b>(req, res)
										</div>
										
										<div class="description">
											<p>Add or update a registration for a given user.</p>
											
											
											
											
										</div>
										
										
											
												<pre class="code"><code>{registrationId: "1234-56-7890", templateVersion: "3", templateLanguage: "en-US",
 service: "apns",
 routes:[{name: "main", token: "unique main token", secondsToLive: 86400},
         {name: "alt", token: "unique alt token", secondsToLive: 86400}]}
</code></pre>
											
										
										
										
											<dl class="detailList params">
												<dt class="heading">Parameters:</dt>
												
													<dt>
														<span class="light fixedFont">{Express.Request}</span> <b>req</b>
														
													</dt>
													<dd><p>Describes the incoming HTTP request. Message body must be JSON that follows the
<a href="../symbols/Registrar.html#RegistrationModel">Registrar#RegistrationModel</a> model.</p></dd>
												
													<dt>
														<span class="light fixedFont">{Express.Response}</span> <b>res</b>
														
													</dt>
													<dd><p>HTTP response generator for the request. Outputs JSON if no error.</p>

<ul>
<li>200 OK: successfully processed request</li>
<li>400 BAD REQUEST: missing or invalid attribute(s)</li>
</ul></dd>
												
											</dl>
										
										
										
										
									</li>
								
							</ul>
						</div>
					</div>
				</section>
			
			
	<!--
	#### EVENT DETAILS
	-->		
			
		</article>
	</div>
</div>

		<script type="text/javascript">
			wbos.CssTools.MediaQueryFallBack.LoadCss('../css/screen.css', '../css/handheld.css', 660)
			codeview.classFilter.Init()
		</script>
	</body>
</html>

